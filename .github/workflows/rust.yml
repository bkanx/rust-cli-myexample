name: Rust

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:  # ‚Üê UNCOMMENT THIS LINE for Challenge 2

env:
  CARGO_TERM_COLOR: always

# jobs:
#  build:

#    runs-on: ubuntu-latest

#    steps:
#    - uses: actions/checkout@v4
    
#    - name: Install Rust  #[MISSING - this is why it fails]
#      uses: actions-rust-lang/setup-rust-toolchain@v1  #[MISSING - this is why it fails]
#    
#    - name: Build
#      run: cargo build --bins
#    - name: Run tests
#      run: cargo test --lib

# chanllenge 1:
jobs:
  check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions-rust-lang/setup-rust-toolchain@v1
      with:
        components: rustfmt, clippy  # Add formatting and linting tools
    
    - name: Check compilation
      run: cargo check
      
    - name: Check code format
      run: cargo fmt -- --check || echo "Formatting issues found - but not failing"
      
 #  - name: Lint with Clippy
 #     run: cargo clippy -- -D warnings
 
    - name: Lint with Clippy
      run: cargo clippy -- -D warnings || echo "Clippy issues found - but not failing"
